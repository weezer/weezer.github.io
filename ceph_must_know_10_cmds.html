<!DOCTYPE html>
<html lang="en"
>
<head>
    <title>10 very usefull ceph cmds - Weezer's BXJ</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link href="/images/favicon.ico" rel="icon">

<link rel="canonical" href="/ceph_must_know_10_cmds.html">

        <meta name="author" content="Weezer Su" />
        <meta name="keywords" content="tech" />
        <meta name="description" content="10 COMMANDS EVERY CEPH ADMINISTRATOR SHOULD KNOW" />

        <meta property="og:site_name" content="Weezer's BXJ" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="10 very usefull ceph cmds"/>
        <meta property="og:url" content="/ceph_must_know_10_cmds.html"/>
        <meta property="og:description" content="10 COMMANDS EVERY CEPH ADMINISTRATOR SHOULD KNOW"/>
        <meta property="article:published_time" content="2018-08-16" />
            <meta property="article:section" content="tech" />
            <meta property="article:tag" content="tech" />
            <meta property="article:author" content="Weezer Su" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="/theme/css/bootstrap.darkly.min.css" type="text/css"/>
    <link href="/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="/theme/css/style.css" type="text/css"/>


</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">
Weezer's BXJ            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="/pages/about-myself.html">
                             About
                          </a></li>
                        <li >
                            <a href="/category/leetcode.html">Leetcode</a>
                        </li>
                        <li >
                            <a href="/category/linux.html">Linux</a>
                        </li>
                        <li >
                            <a href="/category/misc.html">Misc</a>
                        </li>
                        <li >
                            <a href="/category/openstack.html">Openstack</a>
                        </li>
                        <li >
                            <a href="/category/python.html">Python</a>
                        </li>
                        <li class="active">
                            <a href="/category/tech.html">Tech</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="/ceph_must_know_10_cmds.html"
                       rel="bookmark"
                       title="Permalink to 10 very usefull ceph cmds">
                        10 very usefull ceph cmds
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2018-08-16T00:00:00-05:00"> Thu 16 August 2018</time>
    </span>

        <span class="label label-default">Category</span>
        <a href="/category/tech.html">tech</a>


<span class="label label-default">Tags</span>
	<a href="/tag/tech.html">tech</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>if you've just started working with Ceph, you already know there's a lot going on under the hood. To help you in your journey to becoming a Ceph master, here's a list of 10 commands every Ceph cluster administrator should know. Print it out, stick it to your wall and let it feed your Ceph mojo!</p>
<h2>1. Check or watch cluster health: ceph status || ceph -w</h2>
<p>If you want to quickly verify that your cluster is operating normally, use ceph status to get a birds-eye view of cluster status (hint: typically, you want your cluster to be active + clean). You can also watch cluster activity in real-time with ceph -w; you'll typically use this when you add or remove OSDs and want to see the placement groups adjust.</p>
<h2>2. Check cluster usage stats: ceph df</h2>
<p>To check a cluster’s data usage and data distribution among pools, use ceph df. This provides information on available and used storage space, plus a list of pools and how much storage each pool consumes. Use this often to check that your cluster is not running out of space.</p>
<h2>3. Check placement group stats: ceph pg dump</h2>
<p>When you need statistics for the placement groups in your cluster, use ceph pg dump. You can get the data in JSON as well in case you want to use it for automatic report generation.</p>
<h2>4. View the CRUSH map: ceph osd tree</h2>
<p>Need to troubleshoot a cluster by identifying the physical data center, room, row and rack of a failed OSD faster? Use ceph osd tree, which produces an ASCII art CRUSH tree map with a host, its OSDs, whether they are up and their weight.</p>
<h2>5. Create or remove OSDs: ceph osd create || ceph osd rm</h2>
<p>Use ceph osd create to add a new OSD to the cluster. If no UUID is given, it will be set automatically when the OSD starts up. When you need to remove an OSD from the CRUSH map, use ceph osd rm with the UUID.</p>
<h2>6. Create or delete a storage pool: ceph osd pool create || ceph osd pool delete</h2>
<p>Create a new storage pool with a name and number of placement groups with ceph osd pool create. Remove it (and wave bye-bye to all the data in it) with ceph osd pool delete.</p>
<h2>7. Repair an OSD: ceph osd repair</h2>
<p>Ceph is a self-repairing cluster. Tell Ceph to attempt repair of an OSD by calling ceph osd repair with the OSD identifier.</p>
<h2>8. Benchmark an OSD: ceph tell osd. bench*</h2>
<p>Added an awesome new storage device to your cluster? Use ceph tell to see how well it performs by running a simple throughput benchmark. By default, the test writes 1 GB in total in 4-MB increments.</p>
<h2>9. Adjust an OSD’s crush weight: ceph osd crush reweight</h2>
<p>Ideally, you want all your OSDs to be the same in terms of thoroughput and capacity...but this isn't always possible. When your OSDs differ in their key attributes, use ceph osd crush reweight to modify their weights in the CRUSH map so that the cluster is properly balanced and OSDs of different types receive an appropriately-adjusted number of I/O requests and data.</p>
<h2>10. List cluster keys: ceph auth list</h2>
<p>Ceph uses keyrings to store one or more Ceph authentication keys and capability specifications. The ceph auth list command provides an easy way to to keep track of keys and capabilities</p>
<p>eg:
if you want to use another use with ceph cmd, try to copy the keyring to the /etc/ceph, and export CEPH_ARGS="--name client.openstack"</p>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="https://www.linkedin.com/in/weezersu"><i class="fa fa-linkedin-square fa-lg"></i> linkedin</a></li>
                <li class="list-group-item"><a href="https://github.com/weezer"><i class="fa fa-github-square fa-lg"></i> github</a></li>
              </ul>
            </li>



            <li class="list-group-item"><a href="/tags.html"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                <ul class="list-group " id="tags">
                    <li class="list-group-item tag-1">
                        <a href="/tag/bash.html">
                            bash
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="/tag/code.html">
                            code
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="/tag/leetcode.html">
                            leetcode
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="/tag/misc.html">
                            misc
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="/tag/network.html">
                            network
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="/tag/openstack.html">
                            openstack
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="/tag/openstack-ansible.html">
                            openstack-ansible
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="/tag/python.html">
                            python
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="/tag/tech.html">
                            tech
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="/tag/tricks.html">
                            tricks
                        </a>
                    </li>
                </ul>
            </li>
    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2019 Weezer Su
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="/theme/js/respond.min.js"></script>


</body>
</html>